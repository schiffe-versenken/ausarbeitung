% This is LLNCS.DEM the demonstration file of
% the LaTeX macro package from Springer-Verlag
\documentclass[a4paper,12pt]{llncs}
%
\usepackage{makeidx}  % allows for indexgeneration
\makeindex

\usepackage[ngerman]{babel}
\usepackage[utf8]{inputenc}      % Code-Page latin 1
\usepackage[T1]{fontenc}
% Nur eine der beiden folgenden Zeilen einbinden!
% siehe Abschnitt Bilder
%\usepackage{graphicx}       % Bilder einbinden, Version fuer normales latex
\usepackage[pdftex]{graphicx}       % Bilder einbinden, Version fuer pdflatex

% mit Hyperrefs
\usepackage[pdftex, plainpages=false,hypertexnames=true,pdfnewwindow=true,backref=true,colorlinks=true,citecolor=blue,linkcolor=black,urlcolor=blue,filecolor=blue]{hyperref}% 
% weitere Packages
\usepackage{ifthen}                 % Zum Auskommentieren von Textteilen
\usepackage{amssymb}                % Mathematische Buchstaben
\usepackage{amsmath}                % Verbesserter Formelsatz
\usepackage[vlined,boxed]{algorithm2e}
\usepackage{booktabs}               % schönere Tabellen
\usepackage{color}
\usepackage{hyperref}
 \hypersetup{urlcolor=black,citecolor=black}
%\setalcapskip{1.5ex} % fuer package algorithm
\usepackage{dsfont}  
%\newtheorem{definition}{Definition}
\usepackage{doc}

% Seitenformat ===============================================================
\hoffset=-1.25truecm
\setlength{\topmargin}{0.0cm}
\setlength{\textheight}{23.0cm}
\setlength{\footskip}{1.5cm}
\setlength{\textwidth}{15.4cm}
\setlength{\evensidemargin}{1.5cm}
\setlength{\oddsidemargin}{1.5cm}
\setlength{\parskip}{1ex}
\setlength{\parindent}{0pt}
\setlength{\marginparwidth}{1.4cm}
\setlength{\marginparsep}{1mm}

\pagestyle{plain}

% Makro-Definitionen ==========================================================
% Zahlenbereiche -------------------------------------------------------------
\newcommand{\N}{{\mathbb{N}}}
\newcommand{\R}{{\mathbb{R}}}
\newcommand{\C}{{\mathbb{C}}}
\newcommand{\Z}{{\mathbb{Z}}}
\newcommand{\Q}{{\mathbb{Q}}}

% 
\def\myverzeichnis{.}

\numberwithin{equation}{section} 
% Bild -----------------------------------------------------------------------
% #1 Filename;  #2 Label;  #3 Bildunterschrift;  #4 Kurzform
\newcommand{\bild}[4]{
  \begin{figure}[htbp]
    \begin{center}
      \includegraphics{#1}
      \caption[#4]{#3}
      \label{#2}
    \end{center}
  \end{figure}
}

% Bildbreite -----------------------------------------------------------------
% #1 Filename;  #2 Breite;  #3 Label;  #4 Bildunterschrift;  #5 Kurzform
\newcommand{\bildbreite}[5]{
  \begin{figure}[htbp]
    \begin{center}
      \includegraphics[width=#2]{#1}
      \caption[#5]{#4}
      \label{#3}
    \end{center}
  \end{figure}
}

\newtheorem{satz}{Satz}


% ============================================================================
\begin{document}

% =========== Das war der Vorspann, jetzt geht's los! ========================

% ============================================================================
% =============  AB HIER DARF UND SOLL GETIPPT WERDEN ========================
% ============================================================================

\author{Viel Schreiber}
\index{Viel Schreiber}

% Das Institut wird fuer den Betreuer missbraucht ...
\institute{{\bf Betreuer:} Dipl.-Inf. Carl Coder}
\authorrunning{Viel Schreiber}
\title{Meine Seminarausarbeitung}

\maketitle

\thispagestyle{empty}

\begin{abstract}
Ein schöner Abstract. Das ist einfach die Kurzzusammenfassung.
\end{abstract}

% Einleitung -----------------------------------------------------------------
\section{Einleitung}
\subsection{Spielbeschreibung}
Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.

\subsection{Formalisierung des Spielprinzips}
Um nun die optimalen Spielzüge zu bestimmen, wird das Spiel mithilfe der folgenden Definitionen formalisiert.

\begin{definition}
Sei $C_{all}=\{1, \dots, N\}^d$ die Menge aller Zellen (cells) des Spielfeldes mit jeweils $N$ Zellen in $d$ Dimensionen.
\end{definition}

\begin{definition}
Sei $l$ eine mögliche Schiffsposition (location), welche mithilfe einer minimalen Ecke $c_{min}(l)$ und einer maximalen Ecke $c_{max}(l)$ bestimmt wird. Dann ist
\[
cells(l)=
\{
c
\in
C
\mid
c_{min}(l) \leq c \leq c_{max}(l)
\}
\]
die Menge aller Zellen, welche sich innerhalb der möglichen Schiffsposition $l$ befinden.
\end{definition}

\begin{definition}
Sei 
\[
L_{all}=
\{
\{
k
\in
C_{all}
\mid
i \leq k \leq j
\}
\mid
i,j \in C_{all}
\wedge
i \leq j
\}
\] die Menge aller möglichen Schiffspositionen.
\end{definition}

\begin{definition}
Sei $ship\_count$ die Anzahl der platzierten Schiffe.
\end{definition}

\begin{definition}
Sei $all\_distributions=\{L \subseteq L_{all} \mid |L|=m\}$ die Menge von allen möglichen Schiffsverteilungen.
\end{definition}

\begin{definition}
Sei $L_a \in all\_distributions$ die eigentliche und geheime Schiffsverteilung.
\end{definition}

\begin{definition}
Sei $cell \in C_{all}$.
Dann ist 
\[
hit(cell)=|\{l \in L_{all} \mid cell \in cells(l)\} \cap L_a|
\]
die Treffer-Funktion, welche angibt, wie viele Schiffe $h$ bei einem Schuss auf Zelle $c$ getroffen wurden.
\end{definition}

\begin{definition}
Sei $cells=\{c_1, \dots, c_k\} \subseteq C_{all}$ eine Menge an Zellen.
Dann ist
\[
destroyed(cells)=\{l \in L_a \mid cells(l) \subseteq cells\}
\]
die Menge an Schiffen, welche durch die Schüsse auf die Zellen $cells$ bereits versenkt wurden.
\end{definition}

\section{Optimale Schüsse berechnen}

\subsection{Zustände}

\begin{definition}
Sei $F=\{(c_1, h_1), \dots , (c_t, h_t)\}$ der Zustand nach $t$ Schüssen.
\end{definition}

\begin{definition}
Sei $F$ der momentane Zustand.
Dann ist $C_{shot}(F)=\{c \in C_{all} \mid (c,h) \in F, \; h \in N_0\}$ die Menge an Zellen, auf die bereits geschossen wurde.
\end{definition}

\begin{definition}
Sei $F$ der momentane Zustand.
Dann ist $C_{left}(F)=C_{all} \setminus C_{shot}(F)$ die Menge an Zellen, auf die noch nicht geschossen wurde.
\end{definition}

\begin{definition}
Sei $F$ der momentane Zustand und $cell \in C_{left}(F)$ die beschossene Zelle.
Dann ist
\[
fire(F, cell)=F \cup \{(cell,hit(cell))\}
\]
die Schuss-Funktion, welche die Zelle dem Zustand $F$ hinzufügt.
\end{definition}

\begin{definition}
Sei $F$ der momentane Zustand und $cell \in C_{left}(F)$ die beschossene Zelle und $h \in \N_0$.
Dann ist
\[
hypothetically\_fire(F, cell, hits)=F \cup \{(cell,hits)\}
\]
die Schuss-Funktion, welche die Zelle dem Zustand $F$ hinzufügt.
\end{definition}

\begin{definition}
Sei $F$ der momentane Zustand.
Dann ist
\[
finished(F) \Leftrightarrow |destroyed(F)|=ship\_count
\]
wahr gdw. alle Schiffe zerstört wurden.
\end{definition}

\subsection{Verteilungsfunktionen}

\begin{definition}
Sei $C_{pos}$ eine Menge an Zellen, die belegt werden sollen. Sei außerdem $C_{neg}$ eine Menge an Zellen, die nicht belegt werden sollen.

Dann ist
\[
location\_count(C_{pos}, C_{neg})
\]
die Anzahl der möglichen Schiffspositionen $l \in L_{all}$ für die gilt: $C_{pos} \subseteq cells(l)$ und $C_{neg} \cap cells(l) = \emptyset$.
\end{definition}

\begin{definition}
Sei $cell\_combinations(F)=\mathcal{P}(C_{shot}(F))$.
\end{definition}

\begin{definition}
Sei $comb \in cell\_combinations(F)$. Dann ist
\[
location\_count(F,comb)=location\_count(comb, C_{shot}(F) \setminus comb)
\]
eine Kurzform.
\end{definition}

\begin{definition}
Sei $comb \in cell\_combinations(F)$. Dann ist
\[
max\_shared\_ship\_count(F,comb)=\min\{location\_count(F, comb)\} \cup \{h \mid (c,h) \in F \wedge c \in comb\}
\]
\end{definition}

\begin{definition}
Sei
\[
hit\_count(F, c, s)=\sum_{comb \in \{x \in cell\_combinations(F) \mid c \in x\}}{s(comb)}
\]
\end{definition}

\begin{definition}
Sei
\begin{align}
\begin{split}
sha&re\_functions(F)=\{s \colon cell\_combinations(F) \rightarrow \N_0 \mid\\
&\forall{(c,h) \in F}\colon hit\_count(F, c, s)=h \wedge \\
&\forall{comb \in cell\_combinations(F)} \colon 0 \leq s(comb) \leq max\_shared\_ship\_count(F, comb)\\
\}\;\;\;& \nonumber
\end{split}
\end{align}
die Menge an Share-Funktionen, die das LGS (...) lösen.
\end{definition}

\begin{satz}
Sei $F$ der momentane Zustand und $s \in share\_functions(F)$ eine Verteilungsfunktion.
Dann ist
\[
distribution\_count(F, s)=
\left( \prod_{comb \in cell\_combinations(F)}{{location\_count(F, comb)\choose s(comb)}} \right)
\]
die Anzahl an möglichen Schiffsverteilungen für die Verteilungsfunktion $s$.
\end{satz}

\begin{proof}
Für jede Teilkombination $comb \in cell\_combinations_F$ gibt es $location\_count_F(comb)$ Positionen, die genau die Zellen der Teilkombination belegen. Aus diesen Positionen werden dann mit der Funktion $s_F$ genau $s_F(comb)$ Positionen für Schiffe ausgewählt. Daher gibt es für jede Teilkombination ${location\_count_F(comb)\choose s_F(comb)}$ verschiedene Schiffspositionen.

Die gesamte Anzahl an möglichen Schiffsverteilungen ergibt sich dann einfach aus der Multiplikation der Anzahl an Schiffspositionen der einzelnen Teilkombinationen.
\end{proof}

\begin{definition}
Sei
\[
distribution\_count(F)=\sum_{s \in share\_functions(F)}{distribution\_count(s)}
\]
\end{definition}

\subsection{Anwendung von Verteilungsfunktionen}

\begin{definition}
Sei $F$ der momentane Zustand.
Dann ist
\[
determined(F) \Leftrightarrow distribution\_count(F)=1
\]
wahr gdw. die richtige Schiffsverteilung bereits bestimmt ist.
\end{definition}

\begin{satz}
Sei $L \in distributions(F)$ eine mögliche Schiffsverteilung zum Zustand $F$.

Dann ist
\[
P(L = L_a \mid F)=\frac{1}{distribution\_count(F)}
\]
die Wahrscheinlichkeit, dass $L$ die richtige Schiffsverteilung ist.
\end{satz}

\begin{proof}
Strukturelle Induktion über $F$:\\
Induktionsanfang: $F=\emptyset$:\\
Zu Beginn herrscht eine Gleichverteilung, d.h. die Wahrscheinlichkeit, dass eine bestimmte Schiffsverteilung gewählt wird, ist für alle Schiffsverteilungen gleich:
\[
P(L = L_a \mid F)=P(L = L_a)=\frac{1}{|all\_distributions|}=\frac{1}{distribution\_count(F)}
\]
Induktionsschritt mit: $F'=F \cup (c,s)$:\\
\[
P(L = L_a \mid F)=\frac{1}{distributions(F)}=\frac{1}{distribution\_count(F)}
\]
\end{proof}

\begin{definition}
Sei $F$ der momentane Zustand.
Sei außerdem $c \in C_{left}(F)$ die beschossene Zelle und $h \in \N_0$.
Dann ist
\[
distributions\_removed(F,c,h)=distribution\_count(F) - distribution\_count(hypothetically\_fire(F,c, h))
\]
die Anzahl an Schiffsverteilungen, die nach diesem Schuss ausgeschlossen werden könnten, falls es genau $h$ Treffer gibt.
\end{definition}

\begin{definition}
Sei $F$ der momentane Zustand.
Sei außerdem $c \in C_{left}(F)$ die beschossene Zelle.
Dann ist
\[
distributions\_removed(F,c)=distributions\_removed(F, c, hit(c))
\]
die Anzahl an Schiffsverteilungen, die nach diesem Schuss ausgeschlossen werden können.
\end{definition}

\begin{satz}
Sei $F$ der momentane Zustand.
Sei außerdem $c \in C_{left}(F)$ die beschossene Zelle und $h \in \N_0$.
Dann ist
\[
P(hit(c)=h \mid F)=\frac{distribution\_count(hypothetically\_fire(F,c, h))}{distribution\_count(F)}
\]
\end{satz}
die Wahrscheinlichkeit zu dem Zustand $F$, dass bei dem Schuss genau $h$ Schiffe getroffen werden.

\begin{proof}
Vor dem Schuss gibt es noch im Zustand $F$ genau $distribution\_count(F)$ mögliche Schiffsverteilungen.
Nach dem Schuss gibt es nur noch $distribution\_count(hypothetically\_fire(F,c, h))$ mögliche Schiffsverteilungen.
Nach Satz () folgt ...
\end{proof}

\begin{satz}
Sei $F$ der momentane Zustand.
Sei außerdem $c \in C_{left}(F)$ die beschossene Zelle.
Dann ist
\[
\mathds{E}(distributions\_removed(F,c))=\sum_{h=0}^{ship\_count - |D_F|} P(hit(c)=h) * distributions\_removed(F,c,h)
\]
\end{satz}

\begin{proof}
Definition des Erwartungswertes.
\end{proof}

\section{Schuss-Strategien}

\begin{definition}
Eine Funktion der Form
\[
strat \colon F \rightarrow C_{left}(F)
\]
wird Strategiefunktion genannt. Diese weißt jedem Zustand die Zelle zu, auf die als nächstes geschossen werden soll.
\end{definition}

\begin{definition}
Sei
\[
all\_strategies(F)=\{ strat \colon F \rightarrow C_{left}(F) \}
\]
die Menge an allen möglichen Strategiefunktionen.
\end{definition}


\subsection{Greedy-Strategie}
Die Greedy-Strategie versucht bei jedem Schuss die erwartete Anzahl an ausgeschlossenen Schiffsverteilungen zu maximieren.

\begin{definition}
Sei $F$ ein Zustand.
Dann ist
\[
strat_{greedy}(F)=\max_{c \in C_{left}(F)} \mathds{E}(distributions\_removed(F,c))
\]
die Zelle, bei welcher bei Beschuss die Anzahl an erwarteten ausgeschlossenen Schiffsverteilungen maximal ist.
\end{definition}

Diese Strategie funktioniert ziemlich gut und lässt sich verhältnismäßig schnell berechnen, ist jedoch nicht die optimale Strategie.


\subsection{Optimale-Strategie}

Um eine optimale Schuss-Strategie zu definieren, werden ein paar Definitionen benötigt, um den Begriff `Optimal` zu definieren.

\subsubsection{Definition von Optimalität}

\begin{definition}
Sei $L$ die gewählte Schiffsverteilung und $F$ der momentane Zustand und sei $determined(L, F)$ wahr.
Dann ist
\[
shots\_to\_finish(L, F)=\sum_{l \in L_a}{|cells(l) \setminus C_{shot}(F)|}
\]
die Anzahl an Schüssen, die noch benötigt werden, um alle Schiffe der bereits bekannten Schiffsverteilung zu versenken.
\end{definition}

\begin{definition}
Sei $L$ die gewählte Schiffsverteilung und $F$ der momentane Zustand.
Sei außerdem $strat \in all\_strategies$ die verwendete Schuss-Strategie.
Dann ist
\[
shots\_left(L, F, strat)=
  \begin{cases} 
  	shots\_to\_finish(L, F) & ,determined(L, F) \\
      shots\_left(L, fire(L, F, strat(F)), strat) + 1 & ,sonst
   \end{cases}
\]
die Anzahl an Schüssen, die benötigt werden, um alle Schiffe der bereits bekannten Schiffsverteilung mit der Schuss-Strategiefunktion $strat$ zu versenken.
\end{definition}

\begin{satz}
Sei $F$ der momentane Zustand und $strat \in all\_strategies$ die verwendete Schuss-Strategie.
Dann ist
\[
\mathds{E}(shots\_left(F, strat))=\frac{1}{distribution\_count(F)} * \sum_{L \in distributions(F)}{shots\_left(L, F, strat)}
\]
die erwartete Anzahl an Schüssen, die benötigt werden, um alle Schiffe zu versenken.
\end{satz}

\begin{proof}
\begin{align}
\mathds{E}(shots\_left(F, strat))=\\
\sum_{L \in distributions(F)}{P(L_a= L \mid F) * shots\_left(L, F, strat)} =\\
\frac{1}{distribution\_count(F)} * \sum_{L \in distributions(F)}{shots\_left(L, F, strat)}
\end{align}
\qed
\end{proof}

Nun kann definiert werden, was es für eine Strategie heißt, optimal zu sein:
\begin{definition}
Eine Strategiefunktion $strat \in all\_strategies$ heißt optimal, falls für alle $strat_{alt} \in all\_strategies$ gilt:
\[
\mathds{E}(shots\_left(F, strat)) \leq \mathds{E}(shots\_left(F, strat_{alt}))
\]
\end{definition}

\subsubsection{Herleitung}

\begin{lemma}
Sei $F$ der momentane Zustand, $c$ die Zelle, auf die geschossen werden soll und $strat \in all\_strategies$ die verwendete Schuss-Strategie.
Dann ist
\[
\mathds{E}(shots\_left(F, c, strat))=\mathds{E}(shots\_left(fire(L_a, F, c), strat)) + 1
\]
die erwartete Anzahl an Schüssen, die benötigt werden, um alle Schiffe zu versenken, falls der nächste Schuss auf Zelle $c$ abgefeuert wird.
\end{lemma}

\begin{proof}
Trivial
\end{proof}

\begin{definition}
Sei $F$ der momentane Zustand und $strat \in all\_strategies$ die verwendete Schuss-Strategie.
Dann ist
\[
min\_expected\_shots(F, strat)=\min_{c \in C_{left}(F)} \mathds{E}(shots\_left(F, c, strat))
\]
die minimale erwartete Anzahl an Schüssen um alle Schiffe zu versenken, falls die nächste beschossene Zelle frei gewählt werden kann und danach die Schuss-Strategie $strat$ verwendet wird.
\end{definition}

\begin{definition}
Sei $F$ ein Zustand.
Dann ist
\[
strat_{opt}(F)=c \in C_{left}(F) \mid min\_expected\_shots(F, strat_{opt})= \mathds{E}(shots\_left(F, c, strat_{opt}))
\]
die optimale Strategiefunktion.
Diese wählt für den Zustand $F$ eine Zelle aus, welche nach Beschuss die Anzahl an benötigten Schüssen um alle Schiffe zu versenken, minimiert.
\end{definition}

\begin{satz}[Optimalität]
Sei $strat_{opt}$ die optimale Strategiefunktion und $strat_{alt} \in all\_strategies$ eine andere Strategiefunktion.
Dann gilt:
\[
\mathds{E}(shots\_left(F, strat_{opt})) \leq \mathds{E}(shots\_left(F, strat_{alt}))
\]
\end{satz}

\begin{proof}
\begin{align}
\mathds{E}(shots\_left(F, strat_{opt})) =\mathds{E}(shots\_left(F, strat_{opt}(F), strat_{opt}))=\\
\min_{c \in C_{left}(F)} \mathds{E}(shots\_left(F, c, strat)) \leq \mathds{E}(shots\_left(F, c_{other}, strat)), c_{other} \in C_{left}(F)\\
\Rightarrow\\
\mathds{E}(shots\_left(F, strat_{opt})) \leq \mathds{E}(shots\_left(F, strat_{alt}))
\end{align}
\qed
\end{proof}

\newpage

Dennis:

\section{Effiziente Berechnung von Schiffspositionen}

Joel und Samuel:

\section{Implementierung der Strategien}

\section{Vergleich der Strategien}


% Literaturverzeichnis ------------------------------------------------
\newpage
\bibliographystyle{alphadinLinkLocal}
\bibliography{literatur} 

%\iffalse
\end{document}
%\fi
