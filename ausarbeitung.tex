% !TeX document-id = {88ddee8b-8eb6-46e0-9af4-2c10d8b61c04}
% !TeX spellcheck = de-DE
% !TeX encoding = utf8
% !TeX TXS-program:compile = txs:///pdflatex/[--shell-escape]
% This is LLNCS.DEM the demonstration file of
% the LaTeX macro package from Springer-Verlag
\documentclass[a4paper,12pt]{llncs}
%
\usepackage{makeidx}  % allows for indexgeneration
\makeindex

\usepackage[ngerman]{babel}
\usepackage[utf8]{inputenc}      % Code-Page latin 1
\usepackage[T1]{fontenc}
% Nur eine der beiden folgenden Zeilen einbinden!
% siehe Abschnitt Bilder
%\usepackage{graphicx}       % Bilder einbinden, Version fuer normales latex
\usepackage[pdftex]{graphicx}       % Bilder einbinden, Version fuer pdflatex

% mit Hyperrefs
\usepackage[pdftex, plainpages=false,hypertexnames=true,pdfnewwindow=true,backref=true,colorlinks=true,citecolor=blue,linkcolor=black,urlcolor=blue,filecolor=blue]{hyperref}% 
% weitere Packages
\usepackage{ifthen}                 % Zum Auskommentieren von Textteilen
\usepackage{amssymb}                % Mathematische Buchstaben
\usepackage{amsmath}                % Verbesserter Formelsatz
\usepackage[vlined,boxed]{algorithm2e}
\usepackage{booktabs}               % schönere Tabellen
\usepackage{color}
\usepackage{hyperref}
 \hypersetup{urlcolor=black,citecolor=black}

%\setalcapskip{1.5ex} % fuer package algorithm
\usepackage{dsfont}  
%\newtheorem{definition}{Definition}
\usepackage{doc}
\usepackage{mathrsfs}
%TODO Die nächsten drei Zeilen sollten in der finalen Version deaktiviert werden.
\immediate\write18{./gitinfo2}
\usepackage[local,grumpy,dirty={, geändert}]{gitinfo2}
\usepackage{todonotes}

% Seitenformat ===============================================================
\hoffset=-1.25truecm
\setlength{\topmargin}{0.0cm}
\setlength{\textheight}{23.0cm}
\setlength{\footskip}{1.5cm}
\setlength{\textwidth}{15.4cm}
\setlength{\evensidemargin}{1.5cm}
\setlength{\oddsidemargin}{1.5cm}
\setlength{\parskip}{1ex}
\setlength{\parindent}{0pt}
\setlength{\marginparwidth}{1.4cm}
\setlength{\marginparsep}{1mm}

\pagestyle{plain}

% Makro-Definitionen ==========================================================

% 
\def\myverzeichnis{.}

\numberwithin{equation}{section} 
% Bild -----------------------------------------------------------------------
% #1 Filename;  #2 Label;  #3 Bildunterschrift;  #4 Kurzform
\newcommand{\bild}[4]{
  \begin{figure}[htbp]
    \begin{center}
      \includegraphics{#1}
      \caption[#4]{#3}
      \label{#2}
    \end{center}
  \end{figure}
}

% Bildbreite -----------------------------------------------------------------
% #1 Filename;  #2 Breite;  #3 Label;  #4 Bildunterschrift;  #5 Kurzform
\newcommand{\bildbreite}[5]{
  \begin{figure}[htbp]
    \begin{center}
      \includegraphics[width=#2]{#1}
      \caption[#5]{#4}
      \label{#3}
    \end{center}
  \end{figure}
}

\newtheorem{satz}{Satz}
\newtheorem{korollar}{Korollar}


% ============================================================================
\begin{document}

% =========== Das war der Vorspann, jetzt geht's los! ========================

% ============================================================================
% =============  AB HIER DARF UND SOLL GETIPPT WERDEN ========================
% ============================================================================
\author{Viel Schreiber}
\index{Viel Schreiber}

% Das Institut wird fuer den Betreuer missbraucht ...
\institute{{\bf Betreuer:} Dipl.-Inf. Carl Coder}
\authorrunning{Viel Schreiber}
\title{Meine Seminarausarbeitung}

\maketitle

\todo[inline]{Version \gitAbbrevHash, Branch \gitBranch, \gitCommitterIsoDate \gitDirty}

\thispagestyle{empty}

\begin{abstract}
Ein schöner Abstract. Das ist einfach die Kurzzusammenfassung.
\end{abstract}

[Christopher]

% Einleitung -----------------------------------------------------------------
\section{Einleitung}

\subsection{Spielbeschreibung}
Diese Ausarbeitung beschäftigt sich mit der Umsetzung von Schiffe-Versenken in beliebig viele Dimensionen.
Die generelle Funktionsweise von dem normalen Schiffe-Versenken bleibt erhalten, muss jedoch um einige Dinge erweitert werden, um auch in höheren Dimensionen gut spielbar zu sein.

Wir betrachten das Spielgeschehen zur Einfachheit halber nur aus der Sicht eines Spielers.
Zu Beginn platziert der Gegner eine beliebige Anzahl an Schiffen auf seinem Spielfeld. Es wird davon ausgegangen, dass die Schiffspositionen rein zufällig ausgewählt wurden, d.h. dass zu Spielbeginn eine Flotte aus der Menge aller möglichen Flotten ausgewählt wird. Jede mögliche Flotte hat hierbei die gleiche Wahrscheinlichkeit, ausgewählt zu werden.
Natürlich sind die Schiffspositionen dem Spieler nicht bekannt.
Die Gesamtheit aller gewählten Schiffspositionen wird auch die Flotte genannt.
Nun kann der Spieler anfangen, auf bestimmte Positionen auf dem Spielfeld, auch Zellen genannt, zu schießen.
Da Schiffe überlappen können, können mit jedem Schuss mehrere Schiffe, also Teilmengen der Flotte getroffen werden.
Nach jedem Schuss erfährt der Spieler von seinem Gegner, welche Teilmenge der Flotte er getroffenen hat.
Falls keine Schiffe getroffen wurden ist diese Menge natürlich leer.
Ein Schiff gilt als versenkt, sobald es getroffen wurde.
Sobald alle Schiffe versenkt wurden, ist das Spiel beendet.

Das Ziel des Spielers ist es, mit möglichst wenig Schüssen alle Schiffe zu versenken.

%\bildbreite{figures/einleitung.jpg}{15cm}{Einleitung}{Bild}{as}

\subsection{Inhalt}
Zu Beginn wird das beschriebene Spielprinzip formalisiert, sodass man damit mathematisch arbeiten kann.

Anschließend werden verschiedene Spielstrategien vorgestellt.

Danach werden verschiedene Möglichkeiten präsentiert, die Spielstrategien so gut wie möglich zu optimieren, damit sie auch mit sehr vielen Dimensionen immernoch effizient berechenbar sind.

Zum Schluss werden dann die Strategien mithilfe der vorherigen Kenntnisse implementiert und die Ergebnisse in Bezug auf Laufzeiteffizienz verglichen.

\section{Formalisierung des Spielprinzips}

\begin{definition}
Sei $C_{all}=\{1, \dots, N\}^d$ die Menge aller Zellen (cells) des Spielfeldes mit jeweils $N$ Zellen in $d$ Dimensionen.
\end{definition}

\begin{definition}
Seien $c, c' \in C_{all}$ Zellen.
Dann ist
\[
c \leq c' \Leftrightarrow \forall i \in \{1, \dots, d\} \colon c_{i} \leq c'_{i} 
\]
\end{definition}

\begin{definition}
Sei $c_{min} \in C_{all}$ und $c_{max} \in C_{all}$ mit $c_{min} \leq c_{max}$.
\[
l=(c_{min}, c_{max})
\]
eine mögliche Schiffsposition (location), welche mithilfe einer minimalen Ecke $c_{min}$ und einer maximalen Ecke $c_{max}$ bestimmt wird.
\end{definition}

\begin{definition}
Sei $l=(c_{min}, c_{max})$ eine mögliche Schiffsposition.
Dann ist
\[
cells(l)=
\{
c
\in
C_{all}
\mid
c_{min} \leq c \leq c_{max}
\}
\]
die Menge aller Zellen, welche sich innerhalb der möglichen Schiffsposition $l$ befinden.
\end{definition}

\begin{definition}
Sei $c \in C_{all}$ eine Zelle.
Dann ist
\[
locations(c)=
\{
l
\in
L_{all}
\mid
c \in cells(l)
\}
\]
die Menge aller Schiffspositionen, welche die Zelle $c$ enthalten.
\end{definition}

\begin{definition}
Sei 
\[
L_{all}=
\{
(i, j) \in C_{all} \times C_{all}
\mid
i \leq j
\}
\] die Menge aller möglichen Schiffspositionen.
\end{definition}

\begin{definition}
Sei $F_{all}=P(L_{all}) \setminus \emptyset$ die Menge von allen möglichen Flotten, die der Gegner auf dem Spielfeld platzieren kann.
\end{definition}

\begin{definition}
Sei $F_a \in F_{all}$ die vom Gegner auf dem Spielfeld platzierte Flotte.
Da diese geheim ist, wird sie in der restlichen Ausarbeitung auch als unbekannt angesehen.
\end{definition}

\begin{definition}
Sei $F \in F_{all}$ und $c \in C_{all}$.
Dann ist 
\begin{align}
&hit:F_{all} \times C_{all} \rightarrow L_{all} \quad mit \nonumber\\
&hit(F, c)=\{l \in F \mid c \in cells(l)\} \nonumber
\end{align}
die Treffer-Funktion, welche angibt, welche Schiffe bei einem Schuss auf Zelle $c$ getroffen wurden, falls $F$ die vom Gegner platzierte Flotte ist. In anderen Worten, die Menge der Schiffe aus Flotte $F$, die die Zelle $c$ belegen.
\end{definition}

\begin{definition}
Sei $c \in C_{all}$.
Dann ist 
\[
hit(c)=hit(F_a, c)
\]
eine Kurzform. Die Funktionswerte sind ebenfalls unbekannt, da $F_a$ geheim ist. Also wird auch diese Funktion in der restlichen Ausarbeitung auch als unbekannt angesehen.
\end{definition}

\subsection{Zustände}

In dem Zustand werden alle Informationen über alle vorherigen Schüsse gespeichert.
Dies sind die beschossenen Zellen und jeweils getroffenen Schiffe.

\begin{definition}
Sei
\[
S_{all}=\mathscr{P}(C_{all}\times L_{all})
\]
die Menge aller möglichen Zustände.

Ein Zustand der Form $S=\{(c_1, L_1), \dots , (c_k, L_k)\}\in S_{all}$ ist dann der Zustand nach $k$ Schüssen.
Jedes Tupel enthält die Zelle, auf die geschossen wurde und die Menge an Schiffen, welche dabei getroffen wurde.
Das heißt, die Reihenfolge der einzelnen Schüsse spielt hier keine Rolle, da ein Zustand nur eine Menge an Tupeln ist.
\end{definition}

\begin{definition}
Sei $S\in S_{all}$ der momentane Zustand.
Dann ist
\begin{align}
C_{shot}(S)=\{c \in C_{all} \mid (c,L) \in S, \; L \in L_{all}\}
\end{align}
 die Menge an Zellen, auf die bereits geschossen wurde.
\end{definition}

\begin{definition}
Sei $S\in S_{all}$ der momentane Zustand.
Dann ist 
\begin{align}
C_{left}(S)=C_{all} \setminus C_{shot}(S)
\end{align}
die Menge an Zellen, auf die noch nicht geschossen wurde.
\end{definition}

\begin{definition}
Sei $S\in S_{all}$ der momentane Zustand.
Dann ist 
\begin{align}
sunk\_ships(S)=\bigcup_{(c,L) \in S} L
\end{align}
die Menge an Schiffen, die bereits versenkt wurde.
\end{definition}

\begin{definition}
Sei $S\in S_{all}$ der momentane Zustand.
Sei $k \in N$ die Flottengröße.
Dann ist 
\begin{align}
ships\_left(S, k)=k - |sunk\_ships(S)|
\end{align}
die Anzahl an Schiffen, welche noch nicht versenkt wurden, falls die vom Gegner gewählte Flotte die Größe $k$ hat.
\end{definition}

\begin{definition}
Sei
\begin{align}
&fire:F_{all}\times S_{all}\times C_{all} \rightarrow S_{all} \quad mit \nonumber\\
&fire(F, S, c)=S \cup \{(c,hit(F, c))\}  \nonumber
\end{align}
die Schuss-Funktion, welche die Zelle und den jeweiligen Treffer dem Zustand $S$ hinzufügt.
Es ist zu beachten, dass bereits getroffene und damit versenkte Schiffe bei einem weiteren Treffer an anderer Position dem Zustand nochmal hinzugefügt werden. Dies macht aber in der restlichen Betrachtung keinen Unterschied.
\end{definition}

\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Dann ist
\[
finished(S) \Leftrightarrow ships\_left(S)=0
\]
wahr gdw. alle Schiffe zerstört wurden.
\end{definition}

\subsection{Unterteilung von Schiffspositionen}

Betrachten wir im Zustand $S\in S_{all}$ eine Zelle $c \in C_{left}(S)$, auf die noch nicht geschossen wurde, so können wir die Menge aller möglichen Schiffspositionen $L_{all}$ in drei Mengen unterteilen. Zum einen die Menge an Schiffspositionen, die bereits durch einen abgegebenen Schuss getroffen wurde, $removed\_locations(S)$. Zum Anderen die Menge an Schiffspositionen, welche noch nicht getroffen wurden, aber bei einem Schuss auf die Zelle $c$ getroffen werden, $unique\_locations(S, c)$. Und zuletzt die Menge an Schiffspositionen, auf die keines der beiden Kriterien zutrifft, $other\_locations(S, c)$.

Kennen wir die Kardinalitäten dieser Mengen, können wir damit einfach unter Ausnutzung der Gleichverteilung von Flotten die Wahrscheinlichkeitsfunktion für die Anzahl an getroffenen Schiffen bei einem Schuss auf die Zelle $c$ berechnen, wie später gezeigt wird.

\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Sei $c \in C_{left}(S)$ die beschossene Zelle.
Dann ist
\[
unique\_locations(S, c)=\{l \in locations(c) \mid \nexists (c_S,L) \in S \colon l \in locations(c_S)\}
\]
die Menge aller Schiffspositionen, die noch von keinem vorherigen Schuss getroffen wurden, aber bei einem Schuss auf Zelle $c$ getroffen würden.
\end{definition}

\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Dann ist
\[
removed\_locations(S)=\bigcup_{(c,L) \in S} locations(c)
\]
die Menge aller Schiffspositionen, die von einem vorherigen Schuss bereits getroffen wurden.
\end{definition}

\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Sei $c \in C_{left}(S)$ die beschossene Zelle.
Dann ist
\[
other\_locations(S, c)=L_{all} \setminus unique\_locations(S, c) \setminus removed\_locations(S)
\]
die Menge aller Schiffspositionen, die noch von keinem vorherigen Schuss getroffen wurden und auch bei einem Schuss auf Zelle $c$ nicht getroffen würden.
\end{definition}

\begin{satz}
Sei $S\in S_{all}$ ein Zustand.
Sei $c \in C_{left}(S)$ die beschossene Zelle.
Dann ist
\[
\{unique\_locations(S, c), removed\_locations(S), other\_locations(S, c)\}
\]
eine Partition von $L_{all}$.
\end{satz}

\begin{proof}
\end{proof}

\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Sei $c \in C_{left}(S)$ die beschossene Zelle.
Dann ist
\begin{align}
split(S,c)&=(|unique\_locations(S, c)|, |removed\_locations(S)|, |other\_locations(S, c)|)
\nonumber
\end{align}
ein Tupel, der die Kardinalität der Mengen, die eine Partition von $L_{all}$ bilden, enthält.
Die genaue Berechnung dieser Werte, wird im Implementations-Kapitel behandelt.
\end{definition}

\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Dann ist
\[
locations\_left(S)=|L_{all}| - |removed\_locations(S)|
\]
\end{definition}

\subsection{Flotten}

\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Dann ist
\[
k_{min}(S)=|sunk\_ships(S)| + 1
\]
die minimale Größe, die die vom Gegner gewählte Flotte $F_a$ zum Zustand $S$ hat.
\end{definition}

\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Dann ist
\[
k_{max}(S)=locations\_left(S) + |sunk\_ships(S)|
\]
die maximale Größe, die die vom Gegner gewählte Flotte $F_a$ zum Zustand $S$ noch haben kann.
\end{definition}

\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Sei außerdem $k \in \{k_{min}(S), \dots, k_{max}(S)\}$ die Größe der Flotte.
Dann ist
\[
fleets(S, k)=\{F\in F_{all}(k) \mid \forall (c,L) \in S \colon hit(F, c)=L\}
\]
die Menge aller Flotten der Größe $k$, auf die die Treffer-Informationen vom Zustand $S$ zutreffen.
In anderen Worten, die Menge an zum Zustand $S$ noch möglichen Flotten der Größe $k$.
\end{definition}

\begin{satz}
Sei $S\in S_{all}$ ein Zustand.
Sei außerdem $k \in \{k_{min}(S), \dots, k_{max}(S)\}$ die Größe der Flotte.
Dann gilt:
\[
|fleets(S, k)|=\binom{locations\_left(S)}{ships\_left(S, k)}
\]
\end{satz}

\begin{proof}
\end{proof}

\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Dann ist
\[
fleets(S)=\bigcup_{k=k_{min}(S)}^{k_{max}(S)} fleets(S, k)
\]
die Menge aller Flotten, auf die die Treffer-Informationen vom Zustand $S$ zutreffen.
In anderen Worten, die Menge an zum Zustand $S$ noch möglichen Flotten.
\end{definition}

\begin{satz}
Sei $S\in S_{all}$ ein Zustand.
Dann gilt:
\[
|fleets(S)|=2^{locations\_left(S)} - 1
\]
\end{satz}

\begin{proof}
\begin{align}
\begin{split}
&|fleets(S)|=\sum_{k=k_{min}(S)}^{k_{max}(S)} |fleets(S, k)|\\
=&\sum_{k=k_{min}(S)}^{k_{max}(S)} \binom{locations\_left(S)}{k - sunk\_ships(S, k)} \\
=&\sum_{k=k_{min}(S)-sunk\_ships(S, k)}^{k_{max}(S) - sunk\_ships(S, k)} \binom{locations\_left(S)}{k} \\
=&\sum_{k=1}^{locations\_left(S)} \binom{locations\_left(S)}{k} \\
=&(\sum_{k=0}^{locations\_left(S)} \binom{locations\_left(S)}{k}) - 1\\
=&2^{locations\_left(S)} - 1
\end{split}
\end{align}
\qed
\end{proof}

\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Sei außerdem $k \in \{k_{min}(S), \dots, k_{max}(S)\}$ die Größe der Flotte.
Sei $c \in C_{left}(S)$ die beschossene Zelle und $h \in \{0, \dots, ships\_left(S, k)\}$ eine Anzahl an Schiffen.
Dann ist
\[
valid\_fleets(S,k,c,h)=\{F \in fleets(S, k) \mid |hit(F, c)|=h\}
\]
die Menge aller Flotten der Größe $k$, auf die die Treffer-Informationen vom Zustand $S$ zutreffen und außerdem genau $h$ Schiffe die Zelle $c$ belegen.
\end{definition}

\begin{satz}
Sei $S\in S_{all}$ ein Zustand.
Sei außerdem $k \in \{k_{min}(S), \dots, k_{max}(S)\}$ die Größe der Flotte.
Sei $c \in C_{left}(S)$ die beschossene Zelle und $h \in \{0, \dots, ships\_left(S, k)\}$ eine Anzahl an Schiffen.
Sei außerdem $split(S,c)=(u, r, o)$.
Dann gilt:
\[
|valid\_fleets(S,k,c,h)|=\binom{u}{h} \binom{o}{ships\_left(S, k) - h}
\]
\end{satz}

\begin{proof}
\end{proof}

\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Sei $c \in C_{left}(S)$ die beschossene Zelle und $h \in \{0, \dots, ships\_left(S, k_{max}(S))\}$ eine Anzahl an Schiffen.
Dann ist
\[
valid\_fleets(S,c,h)=\bigcup_{k=k_{min}(S)}^{k_{max}(S)} valid\_fleets(S,k,c,h)
\]
die Menge aller Flotten, auf die die Treffer-Informationen vom Zustand $S$ zutreffen und außerdem genau $h$ Schiffe die Zelle $c$ belegen.
\end{definition}

\begin{definition}
Sei $h \in N_0$ eine Anzahl an Schiffen.
Dann ist
\[
h_0(h)=
\begin{cases}
1, h=0 \\
0, sonst
\end{cases}
\]
\end{definition}

\begin{satz}
Sei $S\in S_{all}$ ein Zustand.
Sei $c \in C_{left}(S)$ die beschossene Zelle und $h \in \{0, \dots, ships\_left(S, k_{max}(S))\}$ eine Anzahl an Schiffen.
Sei außerdem $split(S,c)=(u, r, o)$.
Dann gilt:
\[
|valid\_fleets(S,c,h)|=\binom{u}{h} 2^o - h_0(h)
\]
\end{satz}

\begin{proof}
\begin{align}
\begin{split}
&|valid\_fleets(S,c,h)|=\sum_{k=k_{min}(S)}^{k_{max}(S)} |valid\_fleets(S,k,c,h)|\\
=&\sum_{k=k_{min}(S)}^{k_{max}(S)} \binom{u}{h} \binom{o}{k - sunk\_ships(S,k) - h} \\
=&\binom{u}{h} \sum_{k=k_{min}(S)-sunk\_ships(S, k)}^{k_{max}(S) - sunk\_ships(S, k)} \binom{o}{k - h} \\
=&\binom{u}{h} \sum_{k=1}^{locations\_left(S)} \binom{locations\_left(S) - u}{k - h} \\
=&\binom{u}{h} \sum_{k=\max(1 - h, 0)}^{locations\_left(S) - h} \binom{locations\_left(S) - u}{k} \\
=&\binom{u}{h} \sum_{k=\max(1 - h, 0)}^{locations\_left(S) - u} \binom{locations\_left(S) - u}{k} \\
=&\binom{u}{h} 2^{locations\_left(S) - u} - h_0(h)\\
=&\binom{u}{h} 2^{o} - h_0(h)
\end{split}
\end{align}
\qed
\end{proof}

\subsection{Wahrscheinlichkeiten}

\begin{satz}
Sei $S\in S_{all}$ ein Zustand.
Sei außerdem $F \in fleets(S)$ eine mögliche Flotte.
Dann ist
\[
P_S(F = F_a)=\frac{1}{|fleets(S)|}
\]
die Wahrscheinlichkeit, dass $F$ die vom Gegner gewählte Flotte zum Zustand $S$ ist.
\end{satz}

\begin{definition}
Sei $c \in C_{left}(S)$ die beschossene Zelle.
Dann ist
\[
H_{c}=hit(c)
\]
eine Zufallsvariable, die die Anzahl an Treffern bei einem Schuss auf Zelle $c$ angibt.
\end{definition}

\begin{definition}
Sei $S\in S_{all}$ ein Zustand und $c \in C_{left}(S)$ die beschossene Zelle.
Dann ist
\[
P_S(H_{c}=h)=P(hit(c)=h \mid S) 
\]
die Wahrscheinlichkeit, $h$ Schiffe zum Zustand $S$ bei einem Schuss auf Zelle $c$ zu treffen.
\end{definition}


\begin{satz}
Sei $S\in S_{all}$ ein Zustand.
Sei $c \in C_{left}(S)$ die beschossene Zelle.
Sei außerdem $split(S,c)=(u, r, o)$.
Dann ist
\[
P_S(H_c = h)=\binom{u}{h} 2^{-u} - \frac{h_0(h)}{2^{locations\_left(S)}}
\]
\end{satz}
die Wahrscheinlichkeit zu dem Zustand $S$, dass bei dem Schuss auf Zelle $c$ genau $h$ Schiffe getroffen werden.

\begin{proof}
\begin{align}
\begin{split}
&P_S(H_c = h)=\sum_{F \in valid\_fleets(S,c,h)} P_S(F = F_a) \\
=&\sum_{F \in valid\_fleets(S,c,h)} \frac{1}{|fleets(S)|} \\
=& \frac{1}{|fleets(S)|} \sum_{F \in valid\_fleets(S,c,h)} 1 \\
=& \frac{1}{|fleets(S)|} |valid\_fleets(S,c,h)| \\
=& \frac{|valid\_fleets(S,c,h)|}{|fleets(S)|} \\
=& \frac{\binom{u}{h} 2^o - h_0(h)}{2^{locations\_left(S)}} \\
=& \binom{u}{h} \frac{2^o - h_0(h)}{2^{locations\_left(S)}} \\
=& \binom{u}{h} 2^{o - locations\_left(S)} \\
=& \binom{u}{h} 2^{-u} - \frac{h_0(h)}{2^{locations\_left(S)}}
\end{split}
\end{align}
\qed
\end{proof}


\subsection{Schuss-Strategien}

\begin{definition}
Eine Funktion der Form
\begin{align}
&strat:S_{all} \times C_{all} \rightarrow \mathbb{R} \nonumber
\end{align}
wird Strategiefunktion genannt. Diese weißt zu einem Zustand einer Zelle einen Wert zu, d.h. sie bewertet, wie gut sich jede Zelle als nächstes Schussziel eignet.
\end{definition}

\begin{definition}
Sei
\[
strategies=\{ strat:S_{all} \times C_{all} \rightarrow \mathbb{R} \}
\]
die Menge an allen gültigen Strategiefunktionen.
\end{definition}

\begin{definition}
Sei $x,y \in C_{all}$ mit $x \neq y$ und $d_{min}=\min \{d \in D \mid x_d \neq y_d\}$ die erste Dimension, in denen sich beide Zellen in einer Koordinate unterscheiden.
Dann ist
\[
x <_c y \Leftrightarrow x_{d_{min}} < y_{d_{min}}
\]
die Koordinatenordnung auf $C_{all}$.
\end{definition}

\begin{definition}
Sei $C \subseteq C_{all}$ eine Menge an Zellen.
Dann gilt:
\[
\exists c_{first} \in C \colon \forall c_{other} \in C \setminus \{c_{first}\} \colon , c_{first} <_c c_{other}
\]

Dieses erste Element kann dann verwendet werden, um die folgende Funktion zu definieren:
\[
first(C)=c_{first}
\]
Diese gibt für jede Menge $C$ jeweils das nach der Koordinatenordnung erste Element zurück.
\end{definition}

\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Sei außerdem $strat \in strategies$ die verwendete Schuss-Strategie.
Dann ist
\[
max\_value=\max strat(S, C_{left})
\]
der maximale Wert, den die Strategiefunktion über allen Zellen ausgibt.

Dann ist
\begin{align}
&best\_cell:S_{all} \times strategies \rightarrow C \quad mit \nonumber\\
&best\_cell(S, strat)=first(\{c \in C_{left}(S) \mid strat(S, c) = max\_value\})
\nonumber
\end{align}
eine Funktion, welche die nach der Strategiefunktion $strat$ besten Zelle aus der Menge $C$ auswählt.
Falls es mehrere Zellen mit der gleichen Bewertung gibt, soll davon deterministisch die nach der Koordinatenordnung erste Zelle ausgewählt werden.
\end{definition}

\begin{definition}
Sei $F\in F_{all}$ die gewählte Flotte und $S\in S_{all}$ der momentane Zustand.
Sei außerdem $strat \in S$ die verwendete Schuss-Strategie.
Dann ist
\begin{align}
&shot\_count(F, S, strat)=
& \begin{cases} 
  	0& ,finished(S) \\
      shot\_count(F, fire(F, S, best\_cell(S, strat)), strat) + 1 & ,sonst
   \end{cases}
\nonumber
\end{align}
die Anzahl an Schüssen, die benötigt werden, um alle Schiffe mit der Schuss-Strategiefunktion $strat$ zu versenken.
\end{definition}

\subsection{Algorithmus}

Somit kann nun ein einfacher Algorithmus formuliert werden, der mithilfe einer festgelegten Strategie versucht, alle Schiffe zu versenken:

\begin{algorithm}[H]
 function solve(strat):\\
 $S=\emptyset$\;
 $shot\_count=0$\;
 \While{$\neg finished(S)$}{
  $next\_target=best\_cell(S, strat)$\;
  $S=fire(S, next\_target)$\;
  $shot\_count=shot\_count+1$\;
 }
\end{algorithm}

Dieser Algorithmus bestimmt in jedem Schritt das beste Schussziel und zählt zusätzlich mit, vieviele Schüsse er abgegeben hat.

\section{Greedy-Strategien}

\subsection{Greedy-Hit-Strategie}
Die Greedy-Hit-Strategie versucht bei jedem Schuss die erwartete Anzahl an getroffenen Schiffen zu maximieren.

\begin{definition}
Sei $S\in S_{all}$ ein Zustand und $c \in C_{left}(S)$ die beschossene Zelle.
Dann ist
\[
\mathds{E}_S(hit(c))=\sum_{h \in H} P_S(H_{c}=h) * h
\]
die erwartete Anzahl an getroffenen Schiffen im Zustand $S$ bei einem Schuss auf $c$.
\end{definition}

\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Dann ist
\[
strat_{greedy-hit}(S,c)=\mathds{E}_S(hit(c))
\]
die Greedy-Hit-Strategie.
\end{definition}

\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Dann ist
\[
V_S^{H_{c}}(i)=P_S(H_{c} \leq i)
\]
die Verteilungsfunktion von $P_S(H_{c}=h)$.
\end{definition}

\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Dann ist
\[
I(c)=\sum_{i=0}^{ship\_count - 1} V_S^{H_{c}}(i)=\int_{0}^{ship\_count} V_S^{H_{c}}(x) dx
\]
\end{definition}

\begin{satz}
Sei $S\in S_{all}$ der momentane Zustand.
Sei außerdem $c \in C_{left}(S)$ die beschossene Zelle.
Dann ist
\begin{align}
\begin{split}
&\mathds{E}_S(H_c)=ship\_count - I(S,c)
\end{split}
\end{align}
\end{satz}

\begin{proof}
\begin{align}
\begin{split}
&\mathds{E}_S(H_{c})\\
=&\sum_{h=1}^{ship\_count} P_S(H_{c} \geq h)\\
=&\sum_{h=1}^{ship\_count} P_S(H_{c}=h) + P_S(H_{S,c} > h)\\
=&\sum_{h=1}^{ship\_count} P_S(H_{c}=h) + (1 - P_S(H_{c} \leq h)\\
=&P_S(H_{c} > 0) + \sum_{h=1}^{ship\_count} (1 - P_S(H_{c} \leq h)\\
=&1 - V_S^{H_{c}}(0) + ship\_count - \sum_{h=1}^{ship\_count} P_S(H_{c} \leq h)\\
=&1 - V_S^{H_{c}}(0) + ship\_count - \sum_{h=1}^{ship\_count} V_S^{H_{c}}(h)=\\
=&1 + ship\_count - \sum_{h=0}^{ship\_count} V_S^{H_{c}}(h)=\\
=&ship\_count - \sum_{h=0}^{ship\_count - 1} V_S^{H_{c}}(h)=\\
=&ship\_count - \int_{0}^{ship\_count} V_S^{H_{c}}(h) \; dh\\
=&ship\_count - I(S,c)\\
\end{split}
\end{align}
\qed
\end{proof}

\subsection{Greedy-fleet-Strategie}
Die Greedy-fleet-Strategie versucht bei jedem Schuss die erwartete Anzahl an ausgeschlossenen Flotten zu maximieren.

\begin{definition}
Sei $S\in S_{all}$ der momentane Zustand.
Sei außerdem $c \in C_{left}(S)$ die beschossene Zelle.
Dann ist
\[
fleets\_removed(F, S, c)=fleet\_count(S) - fleet\_count(fire(F, S,c))
\]
die Anzahl an Flotten, die nach diesem Schuss ausgeschlossen werden könnten.
\end{definition}

\begin{satz}
Sei $S\in S_{all}$ der momentane Zustand.
Sei außerdem $c \in C_{left}(S)$ die beschossene Zelle.
Dann ist
\begin{align}
\begin{split}
&\mathds{E}(fleets\_removed(S,c))=\\
&\frac{1}{fleet\_count(S)} * \sum_{F \in fleets(S)} fleets\_removed(F, S, c) \nonumber
\end{split}
\end{align}
\end{satz}

\begin{proof}
Definition des Erwartungswertes.
\end{proof}

\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Dann ist
\[
strat_{greedy-fleet}(S,c)=\mathds{E}(fleets\_removed(S,c))
\]
die Greedy-fleet-Strategie.
\end{definition}


\begin{definition}
Sei $S\in S_{all}$ ein Zustand.
Dann ist
\[
Q(S,c)=\sum_{h \in H} P_S(H_{c}=h)^2
\]
\end{definition}

\begin{satz}
Sei $S\in S_{all}$ der momentane Zustand.
Sei außerdem $c \in C_{left}(S)$ die beschossene Zelle.
Dann ist
\begin{align}
\begin{split}
\mathds{E}(fleet\_count(fire(S,\{c\})))=fleet\_count(S)\; Q(S,c)
\end{split}
\end{align}
\end{satz}

\begin{proof}
\begin{align}
\begin{split}
&\mathds{E}(fleet\_count(fire(S,\{c\})))\\
=&\sum_{h \in H} P_S(H_{c} = h) * fleet\_count(hypo\_fire(S,\{(c,h)\}))\\
=&\sum_{h \in H} \frac{fleet\_count(hypo\_fire(S,\{(c,h)\}))}{fleet\_count(S)}* fleet\_count(hypo\_fire(S,\{(c,h)\}))\\
=&\frac{1}{fleet\_count(S)} * \sum_{h \in H} fleet\_count(hypo\_fire(S,\{(c,h)\}))^2\\
=&\frac{1}{fleet\_count(S)} * \sum_{h \in H} (P_S(H_{c} = h) * fleet\_count(S))^2\\
=&fleet\_count(S) * \sum_{h \in H} P_S(H_{c} = h)^2\\
=&fleet\_count(S) * Q(S,c)\\
\end{split}
\end{align}
\qed
\end{proof}

\begin{satz}
Sei $S\in S_{all}$ der momentane Zustand.
Sei außerdem $c \in C_{left}(S)$ die beschossene Zelle.
Dann ist
\begin{align}
\begin{split}
&\mathds{E}(fleets\_removed(S,c))\\
=&fleet\_count(S) (1 - Q(S,c))
\end{split}
\end{align}
\end{satz}

\begin{proof}
\begin{align}
\begin{split}
&\mathds{E}(fleets\_removed(S,c))\\
=&\mathds{E}(fleet\_count(S) - fleet\_count(fire(S,c)))\\
=&fleet\_count(S) - \mathds{E}(fleet\_count(fire(S,\{c\})))\\
=&fleet\_count(S) - (fleet\_count(S)\; Q(S,c))\\
=&fleet\_count(S) (1 - Q(S,c))
\end{split}
\end{align}
\end{proof}

\subsection{Vergleich der Strategien}
Auf den ersten Blick sieht es aus, dass die beiden vorgestellten Greedy-Strategien zwei verschiedene Definitionen für die gleiche Strategie sind. Im vorherigen Abschnitt wurde aber gezeigt, dass sich beide Strategien unterscheiden, d.h. von unterschiedlichen Eigenschaften der Wahrscheinlichkeitsfunktion $P_S(H_{c} = h)$ abhängen.

Daraus folgt, dass beide Werte von unterschiedlichen Eigenschaften der Wahrscheinlichkeitsverteilung von $P_S(H_{c} = h)$ abhängen. Daher ist die genaue Korrelation zwischen ausgeschlossenen Flotten und getroffenen Schiffen für jede Zelle individuell, da die Wahrscheinlichkeitsverteilung von $P_S(H_{c} = h)$ individuell ist. Für manche Zellen, können beide Strategien äquivalent sein, aber für andere Zellen kann auch eine inverse Korrelation bestehen und mit vielen Treffern gleichzeitig wenig Flotten ausgeschlossen werden.

Mithilfe des Wissens, von was diese zwei verschiedenen Werte abhängen, können jetzt ganz leicht Gegenbeispiele konstruiert werden, in denen beide Strategien unterschiedliche Zellen auswählen.

\section{Implementation}

Um die vorherigen Kapitel zusammenzufassen, kann man sagen, dass im Endeffekt gezeigt wurde, dass sich die Werte für beliebige Zellen der beiden vorgestellten Strategien einfach berechnen lassen, falls die Wahrscheinlichkeitsfunktion $P_S(H_{c} = h)$ gegeben ist. Außerdem wurde gezeigt, dass sich $P_S(H_{c} = h)$ einfach berechnen lässt, falls die Kardinalitäten der 3 Partitionsmengen von $L_{all}$ bekannt sind.

Daraus folgt, dass wir nur die $split$-Funktion, die bereits erwähnt wurde, effizient implementieren müssen:
\begin{align}
split(S,c)&=(|unique\_locations(S, c)|, |removed\_locations(S)|, |other\_locations(S, c)|)
\nonumber
\end{align}

TODO


% Literaturverzeichnis ------------------------------------------------
\newpage
\bibliographystyle{alphadinLinkLocal}
\bibliography{literatur} 

%\iffalse
\end{document}
%\fi
